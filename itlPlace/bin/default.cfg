params:
{
  techname = "IWLS"; //default
  //techname = "NangateMapped"; //with technology mapping
  //techname = "Nangate";       //without technology mapping
  //techname = "ISPD";

  objective = "LSE";
  //objective = "SOD";

  //def = "dma_GP.def";
  //def = ".\\IWLS05\\s298.def";           //141 cells
  //def = ".\\IWLS05\\pci_spoci_ctrl.def"; //1267 cells
  //def = ".\\IWLS05\\tv80.def";           //7161 cells
  //def = ".\\IWLS05\\ac97_ctrl_0.def";      //11855 cells
  //def = ".\\IWLS05\\b21.def";            //18718 cells
  //def = ".\\IWLS05\\b22.def";            //28317 cells
  //def = ".\\IWLS05\\b17.def";            //37117 cells
  //def = ".\\IWLS05\\b18_0.def";           
  //def = ".\\IWLS05\\ethernet.def";       //46771 cells
  //def = ".\\IWLS05\\des_perf.def";       //98341 cells
  
  //def = ".\\AfterGP\\DP_DMA.def";
  //def = ".\\AfterGP\\GP_DMA.def";
  //def = ".\\AfterGP\\RP_DMA.def";

  //def = ".\\AfterGP\\GP_b17.def";

  //def = ".\\AfterGP\\DP_ac97.def";
  //def = ".\\AfterGP\\GP_ac97.def";
  //def = ".\\AfterGP\\RP_ac97.def";

  target_clock_cycle = 0.0;
};

plotter:
{
  //enabled = true;
  windowHeight = 600;
  histogramWindowHeight = 300;
  histogramWindowWidth = 1200;
  autoRefreshStep = 10;
  //saveImages = true;
  saveMilestoneImages = true;
  embeedMilestones = true;
  //createVideo = true;
};

DesignFlow:
{
  //PRE-RUN SECTION
  SkipSpecialNets = true;
  
  //MACRO LOOP SECTION
  nMacroIterations = 0;
  //LoopRandomPlacement = true;
  //LoopGlobalPlacement = true;
  //LoopLR          = true;
  //LoopLegalization = true;
  //LoopDetailedPlacement = true;

  //STANDARD PLACEMENT SECTION
  //RandomPlacement = true;
  //GlobalPlacement = true;
  //LR          = true;
  Legalization = true;
  DetailedPlacement = true;
  //HippocratePlacement = true;
  
  //REPEATERS INSERTION SECTION
  //Buffering = true;
  //BufRandomPlacement = true;
  //BufGlobalPlacement = true;
  //BufLR          = true;
  //BufLegalization = true;
  //BufDetailedPlacement = true;
  
  //MISCELLANEOUS
  //DrawCongestionMap = true; //needs testing
  //FGRRouting = true;
};

MacroLoop:
{
    QAcriteria = "TNS leg.";
    LSE:
    {
        Clustering:
        {
            useClusteringInformationFromFile  = false;
        };
    };
};

LSE:
{
  Clustering:
  {
    //useClusteringInformationFromFile  = true;
    desiredNumberOfClustersAtEveryBin = 5;
    clusterRatio                      = 5;
    desiredFinalNumberOfClusters      = 6000;
    clustersAreaTolerance             = 1.5;
  };

  GlobalPlacement:
  {
    useQAClass = true;
    QAcriteria = "HPWL leg.";
    earlyExit = true;
    nConvergedIterations = 2;
    nTolerantIterations = 2;
    
    placeToTheCenter = true;

    useLogSumExp     = true;
    useQuadraticSpreading = true;
    useUnidirectSpreading = "@~useQuadraticSpreading";  //used only with useQuadraticSpreading = true 
    useBorderBounds    = true;

    //plotSolverState   = true;
    gradientScaling = 10000.0;
    saveTAOmilestones = true;
  };

  TAOOptions:
  {
    spreadingWeightInitialMultiplier = 0.05;
    frtol = 1.0e-8;
  };
};

SOD:
{
  Clustering:
  {
    useClusteringInformationFromFile  = false;
    desiredFinalNumberOfClusters      = 1000000;
  };

  GlobalPlacement:
  {
    useQAClass = true;
    earlyExit = true;
    improvementTreshold = -0.00; //-0.01 means 1% improvement decrease allowed
    nTolerantIterations = 2;
    placeToTheCenter = true;

    useSumOfDelays = true;
    useQuadraticSpreading = true;
    useUnidirectSpreading = "@~useQuadraticSpreading";  //used only with useQuadraticSpreading = true 
    useBorderBounds    = true;

    bufferName = "INVX2";
    bufferCountUpperBound = 25.0; //set to 0 if you want to disable joint algorithm

    plotSolverState   = true;
    gradientScaling = 0.001;
  };

  TAOOptions:
  {
    gradientBalance = 1.0e-5;
    spreadingWeightInitialMultiplier = 0.01;
    frtol = 1.0e-5;
  };
};

DetailedPlacement:
{
  HorizontalSearch:
  {
    active = true;
    plotter: {enabled = false;};
  };
  
  GlobalSwap:
  {
    active = true;
    plotter: {enabled = false;};
  };
  
  VerticalSearch:
  {
    active = true;
    plotter: {enabled = false;};
  };
  
  useConstraints = true;
};

HippocratePlacement:
{
	SWAP = true;
	MOVE = true;
	LOCALMOVE = true;
	COMPACT = true;
	CENTER = true;

	KamaevCheckConstraints = true;

	PathsInCriticalOrder = true;

	LogEveryIteration=true;
	FindOnlyInsideGaps = true; //COMPACT

//	SECCOMPACT = false;
};

Timing:
{
  SignalDirectionsUsed = 1; //rise\fall
  RCE:
  {
    LayersUsed = 3;//0 - lumped (=1 with simplified C extraction), 1 or 2, 3=Hippocrate
  };
};

CriticalPaths:
{
  countLogReportCriticalPaths = 0;  //set to -1 if you want to print all the critical paths
  countPlotCriticalPaths = 0;       //set to -1 if you want to plot all the critical paths
  plotWait = 1;
};

NetWeighting:
{
  useNetWeights = true;
  netWeightsImportFileName = "";
  netWeightsExportFileName = "";
  method = "APlace";
  //method = "SensitivityGuidedNetWeighting";
  normalize = false;

  APlace:
  {
    u    = 0.3;
    beta = 2.0;
    aggregationMethod = "sum";
  };
  SensitivityGuidedNetWeighting:
  {
    minWeight = 1.0;
    alpha     = 0.6;
    C         = 3227.0;
  };
};

Legalization:
{
  Abacus:
  {
    //usePlotter = true;
    plotterStep = 100;
    //useWeights = true;
    weightMultiplier = 1;
  };
};

Buffering:
{
  LSE: { Clustering: { useClusteringInformationFromFile  = false; }; };
  SOD: { Clustering: { useClusteringInformationFromFile  = false; }; };
  LR:  { Clustering: { useClusteringInformationFromFile  = false; }; };

  DefaultBuffer:
  {
    Macro="BUF_ITL";
    InputPin = "A";
    OutputPin = "Y";
  };
  Percent = 1.00;
  Iterations = 15;
  DoIterative = false;
  
  Legalization:
  {
    doReport = false;
  };
};

CongestionMap:
{
    nHorTiles  = 30;
    nVertTiles = 30;
    nMaxLines  = 10; //all wires
    nMaxCLines = 4; //critical wires
    nMaxPins   = 10;
};

FGRRouting:
{
  maxRoutingTime        = 86400; //max time to work in seconds
  calculateCapacity     = true;  //use (or not) formula to calculate capacity
  powerTracsPerRow      = 2;
  verticalCapacity      = 20;
  horizontalCapacity    = 20;
  nHorTiles             = 0; //if 0 then
  nVertTiles            = 0; //nHorTiles == nVertTiles == nRows / 2
  FGROutputFile         = "@params.def";
  ImageSize             = 900; //horizontal and vertical number of pixels in the XPM file
  PrintToRoutersFormats = false;
  ISPDFileName          = "@params.def";
  LabyrinthFileName     = "@params.def";
};

Config:
{
	//Trace = true;
	Replicate = true;
	WarnOnChange = true;
};